(()=>{var e={770:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.l-modal[data-v-758f7bac] {\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    position: fixed;\n    background: rgba(0, 0, 0, 0.69);\n    z-index: 1050;\n    transition: all 0.4s ease-in-out;\n    -moz-transition: all 0.4s ease-in-out;\n    -webkit-transition: all 0.4s ease-in-out;\n    margin: 0;\n    padding: 0;\n    pointer-events: auto;\n}\n.l-modal-body[data-v-758f7bac] {\n    padding: 15px;\n    width: 400px;\n    margin: 30px auto;\n    border-radius: 5px;\n    background: #fff;\n    box-shadow: 0 3px 7px rgba(0, 0, 0, .25);\n    -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, .25);\n    -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, .25);\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n",""]),e.exports=t},903:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.blur[data-v-0d318d31] {\n    filter: blur(5px);\n}\n.form-bg[data-v-0d318d31] {\n    background-color: lightgrey;\n}\n",""]),e.exports=t},398:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.form-bg[data-v-dbd99e66] {\r\n    background-color: #f1f1f1 !important;\r\n    border-radius: 3px;\n}\n.selected[data-v-dbd99e66] {\r\n    border-bottom: 4px solid darkblue;\n}\r\n",""]),e.exports=t},194:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.decor-iv[data-v-30e93980] {\r\n    background-color: #eaeaea;\r\n    border-radius: 3px;\n}\n.cursor-stop[data-v-30e93980] {\r\n    cursor: not-allowed;\n}\r\n",""]),e.exports=t},810:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.decor[data-v-dbd1f6d4] {\r\n    white-space: nowrap;\r\n    border: 2px solid black;\r\n    border-radius: 10px;\r\n    padding-left: 5px;\n}\n.btn-dc[data-v-dbd1f6d4] {\r\n    cursor: pointer;\r\n    user-select: none;\n}\n.btn-dc[data-v-dbd1f6d4]:hover {\r\n    background-color: darkgray;\r\n    border-radius: 4px;\n}\r\n",""]),e.exports=t},367:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.decor[data-v-7ee7cf1a] {\r\n    white-space: nowrap;\r\n    border: 2px solid black;\r\n    border-radius: 10px;\r\n    padding-left: 5px;\n}\n.btn-dc[data-v-7ee7cf1a] {\r\n    cursor: pointer;\r\n    user-select: none;\n}\n.btn-dc[data-v-7ee7cf1a]:hover {\r\n    background-color: darkgray;\r\n    border-radius: 4px;\n}\n.btn-st[data-v-7ee7cf1a] {\r\n    cursor: pointer;\r\n    user-select: none;\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: #e0e0e0;\r\n    padding-left: 3px;\r\n    padding-right: 3px;\n}\n.btn-st[data-v-7ee7cf1a]:hover {\r\n    background-color: darkgray;\n}\n.fs[data-v-7ee7cf1a] {\r\n    border-top-left-radius: 5px;\r\n    border-bottom-left-radius: 5px;\n}\n.er[data-v-7ee7cf1a] {\r\n    border-top-left-radius: 0 !important;\r\n    border-bottom-left-radius: 0 !important;\n}\r\n",""]),e.exports=t},399:(e,t,a)=>{(t=a(645)(!1)).push([e.id,"\n.decor-iv[data-v-1afe0cf6] {\r\n    background-color: #eaeaea;\r\n    border-radius: 3px;\n}\n.selected[data-v-1afe0cf6] {\r\n    border-bottom: 4px solid darkblue;\n}\r\n",""]),e.exports=t},307:(e,t,a)=>{(t=a(645)(!1)).push([e.id,'\nul[data-v-8ef25f0e] {\r\n    list-style-type: none;\r\n    padding-left: 20px;\n}\n.caret[data-v-8ef25f0e] {\r\n    cursor: pointer;\n}\n.caret[data-v-8ef25f0e]::before {\r\n    content: "\\25B7";\r\n    color: black;\n}\n.caret-down[data-v-8ef25f0e]::before {\r\n    content: "\\25BD";\n}\n.branch[data-v-8ef25f0e] {\r\n    cursor: pointer;\r\n    background-color:#dadada;\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    border-radius: .2rem;\n}\n.selected[data-v-8ef25f0e] {\r\n    border: 2px solid blue;\n}\r\n',""]),e.exports=t},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,s,n,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var r=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(n," */")),d=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[i].concat(d).concat([r]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,s){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(s)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);s&&n[d[0]]||(a&&(d[2]?d[2]="".concat(a," and ").concat(d[2]):d[2]=a),t.push(d))}},t}},26:(e,t,a)=>{var s=a(770);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("5e8a3d18",s,!1,{})},374:(e,t,a)=>{var s=a(903);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("3235b137",s,!1,{})},102:(e,t,a)=>{var s=a(398);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("6c3d68c2",s,!1,{})},867:(e,t,a)=>{var s=a(194);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("41504863",s,!1,{})},726:(e,t,a)=>{var s=a(810);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("5a446319",s,!1,{})},590:(e,t,a)=>{var s=a(367);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("6a47eb25",s,!1,{})},446:(e,t,a)=>{var s=a(399);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("0149c5dc",s,!1,{})},963:(e,t,a)=>{var s=a(307);"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,a(346).Z)("462c0fd3",s,!1,{})},346:(e,t,a)=>{"use strict";function s(e,t){for(var a=[],s={},n=0;n<t.length;n++){var i=t[n],o=i[0],r={id:e+":"+n,css:i[1],media:i[2],sourceMap:i[3]};s[o]?s[o].parts.push(r):a.push(s[o]={id:o,parts:[r]})}return a}a.d(t,{Z:()=>g});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=n&&(document.head||document.getElementsByTagName("head")[0]),r=null,d=0,c=!1,l=function(){},u=null,m="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,a,n){c=a,u=n||{};var o=s(e,t);return p(o),function(t){for(var a=[],n=0;n<o.length;n++){var r=o[n];(d=i[r.id]).refs--,a.push(d)}for(t?p(o=s(e,t)):o=[],n=0;n<a.length;n++){var d;if(0===(d=a[n]).refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete i[d.id]}}}}function p(e){for(var t=0;t<e.length;t++){var a=e[t],s=i[a.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](a.parts[n]);for(;n<a.parts.length;n++)s.parts.push(w(a.parts[n]));s.parts.length>a.parts.length&&(s.parts.length=a.parts.length)}else{var o=[];for(n=0;n<a.parts.length;n++)o.push(w(a.parts[n]));i[a.id]={id:a.id,refs:1,parts:o}}}}function h(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function w(e){var t,a,s=document.querySelector("style["+m+'~="'+e.id+'"]');if(s){if(c)return l;s.parentNode.removeChild(s)}if(v){var n=d++;s=r||(r=h()),t=_.bind(null,s,n,!1),a=_.bind(null,s,n,!0)}else s=h(),t=y.bind(null,s),a=function(){s.parentNode.removeChild(s)};return t(e),function(s){if(s){if(s.css===e.css&&s.media===e.media&&s.sourceMap===e.sourceMap)return;t(e=s)}else a()}}var f,b=(f=[],function(e,t){return f[e]=t,f.filter(Boolean).join("\n")});function _(e,t,a,s){var n=a?"":s.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var i=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function y(e,t){var a=t.css,s=t.media,n=t.sourceMap;if(s&&e.setAttribute("media",s),u.ssrId&&e.setAttribute(m,t.id),n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}}},t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,a),n.exports}a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{blur:null===e.tokenProvider.token}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row justify-content-between form-bg"},[a("div",{staticClass:"col-sm mr-auto"},[a("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(t){e.currentTab="mainTab"}}},[e._v(e._s(e.language.data.mp1))]),e._v(" "),e.tokenProvider.adminSettings?a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){e.currentTab="adminSettings"}}},[e._v(e._s(e.language.data.as1))]):e._e(),e._v(" "),e.tokenProvider.adminSettings?a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{title:e.language.data.di1},on:{click:function(t){return e.$eventHub.$emit("toggle-trash")}}},[e._v("🗑")]):e._e()]),e._v(" "),a("div",{staticClass:"col-sm-auto"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm p-0"},[a("user-menu",{on:{"change-tab":e.setTab}})],1),e._v(" "),a("div",{staticClass:"col-sm pl-0"},[a("language-selector")],1)])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[e.message?a("div",{staticClass:"alert alert-danger"},[e._v("\n                    "+e._s(e.message)+"\n                    "),a("button",{staticClass:"close",on:{click:function(t){e.message=""}}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("keep-alive",[a(e.currentTab,{tag:"component"})],1)],1)])])])};e._withStripped=!0;var t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLang,expression:"selectedLang"}],staticClass:"form-control-sm",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedLang=t.target.multiple?a:a[0]},e.setLang]}},[a("option",{attrs:{value:"en-US"}},[e._v("En")]),e._v(" "),a("option",{attrs:{value:"uk-UA"}},[e._v("Ua")])])])};function s(e,t,a,s,n,i,o,r){var d,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=d):n&&(d=r?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(e,t){return d.call(t),l(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:c}}t._withStripped=!0;var n=s({name:"languageSelector",data(){return{language:this.$root.$data.language,selectedLang:""}},methods:{setLang(){document.cookie="lang="+this.selectedLang+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; samesite=strict",this.$root.loadLanguage(this.selectedLang)}},watch:{"language.name"(e){this.selectedLang=e}}},t,[],!1,null,"de296b94",null);n.options.__file="src/main/Vue/components/header/languageSelector.vue";const i=n.exports;var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dropdown"},[a("button",{staticClass:"btn-sm btn-outline-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n        "+e._s(e.tokenProvider.userName)+"\n    ")]),e._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",on:{click:function(t){return e.$emit("change-tab","userSettings")}}},[e._v(e._s(e.language.data.um1))]),e._v(" "),a("a",{staticClass:"dropdown-item",on:{click:e.logout}},[e._v(e._s(e.language.data.um2))])])])};o._withStripped=!0;var r=s({name:"userMenu",data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider}},methods:{logout(){this.tokenProvider.logout()}}},o,[],!1,null,"22ee1429",null);r.options.__file="src/main/Vue/components/header/userMenu.vue";const d=r.exports;var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-auto bg-light p-0"},[a("span",{staticStyle:{cursor:"pointer",position:"absolute"},on:{click:e.updateTree}},[e._v("↺")]),e._v(" "),a("tree-item",{attrs:{item:e.tree,"selected-item":e.selectedItem},on:{"item-select":e.selectItem}})],1),e._v(" "),a("div",{staticClass:"col p-0"},[e.trash?e._e():a("item-view",{attrs:{item:e.selectedItem}}),e._v(" "),e.trash?a("trash-view",{attrs:{item:e.selectedItem}}):e._e()],1)])])};c._withStripped=!0;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",{staticStyle:{"white-space":"nowrap"},attrs:{draggable:"RW"===e.item.access&&"root"!==e.item.name},on:{dragover:e.dragover,dragstart:function(t){return e.startDrag(t,e.item)},drop:function(t){return e.dropHandler(t,e.item)}}},[e.item.children&&e.item.children.length>0?a("span",{staticClass:"caret",class:{"caret-down":e.isOpen},on:{click:function(t){e.isOpen=!e.isOpen}}}):e._e(),e._v(" "),a("span",{staticClass:"branch",class:{selected:e.item.id===e.selectedItem.id},on:{click:function(t){return e.$emit("item-select",e.item)}}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}]},e._l(e.item.children,(function(t){return a("tree-item",{attrs:{item:t,"selected-item":e.selectedItem},on:{"item-select":function(t){return e.$emit("item-select",t)}}})})),1)])};l._withStripped=!0;const u={name:"treeItem",props:{item:Object,selectedItem:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,isOpen:!1}},watch:{item(){this.item.id===this.selectedItem.id&&this.$emit("item-select",this.item)}},methods:{dragover(e){"RW"===this.item.access&&e.dataTransfer.getData("id")!=this.item.id&&e.preventDefault()},startDrag(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("id",t.id),e.dataTransfer.setData("name",t.name)},async dropHandler(e,t){if(this.$eventHub.$emit("show-msg",""),confirm(this.language.data.cf1+' "'+e.dataTransfer.getData("name")+'" '+this.language.data.cf2+' "'+t.name+'" ?'))try{const a=await this.tokenProvider.getToken(),s=await Vue.cryptoProvider.encrypt({token:a,item:e.dataTransfer.getData("id"),moveTo:t.id}),n=await $.ajax({url:"/container/move",method:"POST",data:s}),i=Vue.cryptoProvider.decrypt(n);i.message?this.$eventHub.$emit("show-msg",this.language.data[i.message]):this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},beforeDestroy(){this.item.id===this.selectedItem.id&&this.$emit("item-select",this.$parent.$props.item)}};a(963);var m=s(u,l,[],!1,null,"8ef25f0e",null);m.options.__file="src/main/Vue/components/mainTabs/mainTab/treeItem.vue";const v=m.exports;var g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"decor-iv"},[a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col"},["RW"===e.item.access?a("div",{staticClass:"dropdown"},[a("button",{staticClass:"btn-sm btn-outline-primary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n                    "+e._s(e.item.name)+"\n                ")]),e._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuButton"}},[a("a",{staticClass:"dropdown-item",on:{click:function(t){e.showAddDlg=!0}}},[e._v(e._s(e.language.data.iv1))]),e._v(" "),"root"!==e.item.name?a("a",{staticClass:"dropdown-item",on:{click:function(t){e.showRenameDlg=!0}}},[e._v(e._s(e.language.data.iv4))]):e._e(),e._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(t){e.showAddNoteDlg=!0}}},[e._v(e._s(e.language.data.iv5))]),e._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(t){e.showAddPwdDlg=!0}}},[e._v(e._s(e.language.data.iv11))]),e._v(" "),"root"!==e.item.name?a("div",{staticClass:"dropdown-divider"}):e._e(),e._v(" "),"root"!==e.item.name?a("span",{class:{"cursor-stop":e.item.children.length>0},attrs:{title:e.item.children.length>0&&e.language.data.iv3}},[a("a",{staticClass:"dropdown-item text-danger",class:{disabled:this.item.children.length>0||"root"===e.item.name},on:{click:e.deleteContainer}},[e._v("\n                        "+e._s(e.language.data.iv2)+"\n                    ")])]):e._e()])]):e._e()])]),e._v(" "),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col m-2"},[e.showAddDlg?a("add-dlg",{attrs:{item:e.item},on:{"close-dlg":function(t){e.showAddDlg=!1}}}):e._e(),e._v(" "),e.showRenameDlg?a("rename-dlg",{attrs:{item:e.item},on:{"close-dlg":function(t){e.showRenameDlg=!1}}}):e._e(),e._v(" "),e.showAddNoteDlg?a("add-note",{attrs:{item:e.item},on:{"close-dlg":function(t){e.showAddNoteDlg=!1}}}):e._e(),e._v(" "),e.showAddPwdDlg?a("add-pwd",{attrs:{item:e.item},on:{"close-dlg":function(t){e.showAddPwdDlg=!1}}}):e._e(),e._v("\n            "+e._s(e.language.data.iv7)+" "),a("br"),e._v(" "),e._l(e.item.notes,(function(t){return a("note-view",{key:"N"+t.id,attrs:{note:t,access:e.item.access}})})),e._v("\n            "+e._s(e.language.data.iv8)+" "),a("br"),e._v(" "),e._l(e.item.passwords,(function(t){return a("pwd-view",{key:"P"+t.id,attrs:{pwd:t,access:e.item.access}})}))],2)])])};g._withStripped=!0;var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control-sm",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{disabled:0===e.name.length},on:{click:e.addContainer}},[e._v("✓\n    ")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){return e.$emit("close-dlg")}}},[e._v("Χ")])])};p._withStripped=!0;var h=s({name:"addDlg",props:{item:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,name:""}},methods:{async addContainer(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,parent:this.item.id,name:this.name}),a=await $.ajax({url:"/container/add",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):(this.$emit("close-dlg"),this.$eventHub.$emit("update-tree"))}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}}},p,[],!1,null,"5f9b84c6",null);h.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/addDlg.vue";const w=h.exports;var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control-sm",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{disabled:0===e.name.length},on:{click:e.renameContainer}},[e._v("✓\n    ")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){return e.$emit("close-dlg")}}},[e._v("Χ")])])};f._withStripped=!0;var b=s({name:"renameDlg",props:{item:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,name:""}},methods:{async renameContainer(){if(this.$eventHub.$emit("show-msg",""),confirm(this.language.data.iv4+' "'+this.item.name+'" ?')&&"root"!==this.item.name)try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,item:this.item.id,name:this.name}),a=await $.ajax({url:"/container/rename",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):(this.$emit("close-dlg"),this.$eventHub.$emit("update-tree"))}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},mounted(){this.name=this.item.name}},f,[],!1,null,"bed7d01c",null);b.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/renameDlg.vue";const _=b.exports;var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{disabled:0===e.name.length},on:{click:e.addNote}},[e._v("✓\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){return e.$emit("close-dlg")}}},[e._v("Χ")])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{placeholder:e.language.data.iv6},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"form-control",attrs:{rows:"4"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}})])])])};y._withStripped=!0;var k=s({name:"addNoteDlg",props:{item:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,name:"",text:""}},methods:{async addNote(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,parent:this.item.id,name:this.name,text:this.text}),a=await $.ajax({url:"/container/addNote",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):this.$emit("close-dlg"),this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}}},y,[],!1,null,"2415236a",null);k.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/addNoteDlg.vue";const P=k.exports;var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"decor"},[e._v("\n        🔒   "+e._s(e.note.name)+"  \n        "),a("span",{staticClass:"btn-dc",attrs:{title:e.language.data.cm1},on:{click:e.toggle}},[e._v("👁")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access,expression:"show && access === 'RW'"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm2},on:{click:function(t){e.edit=!0}}},[e._v("🖉")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access&&e.edit,expression:"show && access === 'RW' && edit"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm3},on:{click:e.save}},[e._v("✅")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access&&e.edit,expression:"show && access === 'RW' && edit"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm4},on:{click:e.cancel}},[e._v("❌")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"RW"===e.access,expression:"access === 'RW'"}],staticClass:"btn-dc float-right",attrs:{title:e.language.data.cm5},on:{click:e.remove}},[e._v("🗑")])]),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.edit,expression:"show && edit"},{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"form-control",attrs:{rows:"4",readonly:!e.edit},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}})])};x._withStripped=!0;const C={name:"noteView",props:{note:Object,access:String},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,show:!1,edit:!1,name:"",text:""}},methods:{toggle(){this.show?(this.show=!1,this.text="",this.edit=!1,this.name=this.note.name):(this.loadNote(),this.show=!0)},async loadNote(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,note:this.note.id}),a=await $.ajax({url:"/container/getNote",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);this.text=s.message}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},async save(){if(this.name&&confirm(this.language.data.iv9)){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,note:this.note.id,name:this.name,text:this.text}),a=await $.ajax({url:"/container/editNote",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message&&this.$eventHub.$emit("show-msg",this.language.data[s.message]),this.edit=!1,this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},cancel(){this.edit=!1,this.name=this.note.name,this.loadNote()},async remove(){if(this.name&&confirm(this.language.data.iv10+this.note.name+"?")){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,note:this.note.id}),a=await $.ajax({url:"/container/removeNote",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message&&this.$eventHub.$emit("show-msg",this.language.data[s.message]),this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}}},mounted(){this.name=this.note.name}};a(726);var T=s(C,x,[],!1,null,"dbd1f6d4",null);T.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/noteView.vue";const S=T.exports;var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{disabled:0===e.name.length},on:{click:e.addPasswd}},[e._v("✓\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(t){return e.$emit("close-dlg")}}},[e._v("Χ")])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{placeholder:e.language.data.iv6},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{placeholder:e.language.data.lf1},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"form-control",attrs:{placeholder:e.language.data.lf2},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}})])])])};V._withStripped=!0;var N=s({name:"addPwdDlg",props:{item:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,name:"",login:"",pass:"",note:""}},methods:{async addPasswd(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,parent:this.item.id,name:this.name,login:this.login,pass:this.pass,note:this.note}),a=await $.ajax({url:"/container/addPasswd",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):this.$emit("close-dlg"),this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}}},V,[],!1,null,"1b2aae94",null);N.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/addPwdDlg.vue";const H=N.exports;var D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"decor"},[e._v("\n        🔒   "+e._s(e.pwd.name)+"  \n        "),a("span",{staticClass:"btn-dc",attrs:{title:e.language.data.cm1},on:{click:e.toggle}},[e._v("👁")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access,expression:"show && access === 'RW'"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm2},on:{click:function(t){e.edit=!0}}},[e._v("🖉")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access&&e.edit,expression:"show && access === 'RW' && edit"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm3},on:{click:e.save}},[e._v("✅")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.show&&"RW"===e.access&&e.edit,expression:"show && access === 'RW' && edit"}],staticClass:"btn-dc",attrs:{title:e.language.data.cm4},on:{click:e.cancel}},[e._v("❌")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"RW"===e.access,expression:"access === 'RW'"}],staticClass:"btn-dc float-right",attrs:{title:e.language.data.cm5},on:{click:e.remove}},[e._v("🗑")])]),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.edit,expression:"show && edit"},{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{readonly:!e.edit},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{display:"flex"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"btn-st fs",attrs:{title:e.language.data.cm1},on:{click:e.loadPwdBody}},[e._v("👁")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"btn-st",attrs:{title:e.language.data.cm6},on:{click:e.pwdToClipboard}},[e._v("📋")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"form-control er",attrs:{readonly:!e.edit,placeholder:"******"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}})]),e._v(" "),a("textarea",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"model",rawName:"v-model",value:e.note,expression:"note"}],staticClass:"form-control",attrs:{rows:"4",readonly:!e.edit},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}})])};D._withStripped=!0;const O={name:"pwdView",props:{pwd:Object,access:String},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,show:!1,edit:!1,name:"",login:"",pass:"",note:""}},methods:{toggle(){this.show?(this.show=!1,this.edit=!1,this.name=this.pwd.name,this.login="",this.pass="",this.note=""):(this.loadPwdEnv(),this.show=!0)},async loadPwdEnv(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,pwd:this.pwd.id}),a=await $.ajax({url:"/container/getPwdEnv",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);this.login=s.login,this.note=s.note}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},async loadPwdBody(){if(this.pass)this.pass="";else{this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,pwd:this.pwd.id}),a=await $.ajax({url:"/container/getPwdBody",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);this.pass=s.password,setTimeout(this.clearPwd,1e4)}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},async pwdToClipboard(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,pwd:this.pwd.id}),a=await $.ajax({url:"/container/getPwdBody",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);navigator.clipboard.writeText(s.password)}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},async save(){if(this.name&&confirm(this.language.data.cm3+" "+this.pwd.name+"?")){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,pwd:this.pwd.id,name:this.name,login:this.login,pass:this.pass,note:this.note}),a=await $.ajax({url:"/container/editPassword",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message&&this.$eventHub.$emit("show-msg",this.language.data[s.message]),this.edit=!1,this.pass="",this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},cancel(){this.edit=!1,this.name=this.pwd.name,this.pass="",this.loadPwdEnv()},async remove(){if(this.name&&confirm(this.language.data.cm5+" "+this.pwd.name+"?")){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,pwd:this.pwd.id}),a=await $.ajax({url:"/container/removePassword",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message&&this.$eventHub.$emit("show-msg",this.language.data[s.message]),this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},clearPwd(){this.edit||(this.pass="")}},mounted(){this.name=this.pwd.name}};a(590);var E=s(O,D,[],!1,null,"7ee7cf1a",null);E.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView/pwdView.vue";const j={name:"itemView",components:{"add-dlg":w,"rename-dlg":_,"add-note":P,"note-view":S,"add-pwd":H,"pwd-view":E.exports},props:{item:Object},data(){return{language:this.$root.$data.language,tokenProvider:this.$root.$data.tokenProvider,showAddDlg:!1,showRenameDlg:!1,showAddNoteDlg:!1,showAddPwdDlg:!1}},watch:{item(){this.showAddDlg=!1,this.showRenameDlg=!1,this.showAddNoteDlg=!1,this.showAddPwdDlg=!1}},methods:{async deleteContainer(){if(this.$eventHub.$emit("show-msg",""),0===this.item.children.length&&"root"!==this.item.name&&confirm(this.language.data.iv2+' "'+this.item.name+'" ?'))try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,item:this.item.id}),a=await $.ajax({url:"/container/delete",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):this.$eventHub.$emit("update-tree")}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}}};a(867);var R=s(j,g,[],!1,null,"30e93980",null);R.options.__file="src/main/Vue/components/mainTabs/mainTab/itemView.vue";const K=R.exports;var L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"decor-iv"},[a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-outline-secondary",class:{selected:"containers"===e.currentTab},on:{click:function(t){e.currentTab="containers"}}},[e._v(e._s(e.language.data.di2))]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-secondary",class:{selected:"items"===e.currentTab},on:{click:function(t){e.currentTab="items"}}},[e._v(e._s(e.language.data.di3))])])]),e._v(" "),a("div",{staticClass:"row m-0"},[a("div",{staticClass:"col"},[a(e.currentTab,{tag:"component",attrs:{item:e.item}})],1)])])};L._withStripped=!0;var B=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n    Cont\n")])};B._withStripped=!0;var A=s({name:"containers"},B,[],!1,null,"a5719ae8",null);A.options.__file="src/main/Vue/components/mainTabs/mainTab/trashView/containers.vue";const I=A.exports;var W=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n    Items "+e._s(e.item.id)+"\n")])};W._withStripped=!0;var M=s({name:"items",props:{item:Object},data:()=>({items:{}}),watch:{"item.id"(){this.getItems()}},methods:{getItems(){console.log("load "+this.item.id)}},mounted(){this.getItems()}},W,[],!1,null,"43192036",null);M.options.__file="src/main/Vue/components/mainTabs/mainTab/trashView/items.vue";const U={name:"trashView",components:{containers:I,items:M.exports},props:{item:Object},data(){return{language:this.$root.$data.language,currentTab:"items"}}};a(446);var J=s(U,L,[],!1,null,"1afe0cf6",null);J.options.__file="src/main/Vue/components/mainTabs/mainTab/trashView.vue";var Z=s({name:"mainTab",components:{"tree-item":v,"item-view":K,"trash-view":J.exports},data(){return{tokenProvider:this.$root.$data.tokenProvider,language:this.$root.$data.language,tree:{},selectedItem:{},trash:!1}},methods:{async updateTree(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e}),a=await $.ajax({url:"/container/getTree",method:"POST",data:t});this.tree=Vue.cryptoProvider.decrypt(a)}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},selectItem(e){this.selectedItem=e},toggleTrash(){this.trash=!this.trash}},watch:{"tokenProvider.token"(e,t){null===t&&null!==e&&this.updateTree()},tree(e,t){void 0===t.name&&(this.selectedItem=this.tree)}},created(){this.$eventHub.$on("update-tree",this.updateTree),this.$eventHub.$on("toggle-trash",this.toggleTrash)},beforeDestroy(){this.$eventHub.$off("update-tree"),this.$eventHub.$off("toggle-trash")}},c,[],!1,null,"6fbbaed2",null);Z.options.__file="src/main/Vue/components/mainTabs/mainTab.vue";const z=Z.exports;var F=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n    User Settings\n")])};F._withStripped=!0;var G=s({name:"userSettings"},F,[],!1,null,"260f79a3",null);G.options.__file="src/main/Vue/components/mainTabs/userSettings.vue";const X=G.exports;var Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-bg pl-3 pr-3 pt-1"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-sm btn-outline-primary",class:{selected:"users"===e.currentTab},on:{click:function(t){e.currentTab="users"}}},[e._v("\n                "+e._s(e.language.data.us1)+"\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-primary",class:{selected:"dbSettings"===e.currentTab},on:{click:function(t){e.currentTab="dbSettings"}}},[e._v("\n                "+e._s(e.language.data.db1)+"\n            ")])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a(e.currentTab,{tag:"component"})],1)])])};Y._withStripped=!0;var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("\n        "+e._s(e.language.data.db2)+" "+e._s(e.statusTxt)+"\n    ")]),e._v(" "),"NEW_DB"===e.status?a("div",[a("button",{staticClass:"btn btn-sm btn-warning",attrs:{disabled:e.key},on:{click:e.generate}},[e._v(e._s(e.language.data.db6))]),e._v(" "),a("br"),e._v(" ⚠ "+e._s(e.language.data.db7)+"\n        "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],staticClass:"form-control",attrs:{readonly:"",rows:"3"},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value)}}}),e._v(" "),a("span",{domProps:{innerHTML:e._s(e.language.data.db8)}})]):e._e(),e._v(" "),"NEED_KEY"===e.status?a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-sm btn-warning",attrs:{disabled:!e.key},on:{click:e.sendKey}},[e._v(e._s(e.language.data.db9))])]):e._e()])};q._withStripped=!0;var Q=s({name:"dbSettings",data(){return{tokenProvider:this.$root.$data.tokenProvider,language:this.$root.$data.language,status:null,key:null}},computed:{statusTxt(){switch(this.status){case"OK":return this.language.data.db3;case"NEED_KEY":return this.language.data.db4;case"NEW_DB":return this.language.data.db5}}},methods:{async getStatus(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e}),a=await $.ajax({url:"/settings/dbStatus",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);this.status=s.message}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},async generate(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e}),a=await $.ajax({url:"/settings/keyGen",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);this.key=s.message}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}},async sendKey(){this.$eventHub.$emit("show-msg","");try{const e=await this.tokenProvider.getToken(),t=await Vue.cryptoProvider.encrypt({token:e,key:this.key}),a=await $.ajax({url:"/settings/setKey",method:"POST",data:t}),s=Vue.cryptoProvider.decrypt(a);s.message?this.$eventHub.$emit("show-msg",this.language.data[s.message]):this.getStatus()}catch(e){this.$eventHub.$emit("show-msg",Vue.errorParser(e))}}},mounted(){this.getStatus()}},q,[],!1,null,"6e3a54a5",null);Q.options.__file="src/main/Vue/components/mainTabs/adminTab/dbSettings.vue";const ee=Q.exports;var te=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v("\n    Users\n")])};te._withStripped=!0;var ae=s({name:"users"},te,[],!1,null,"7a169d58",null);ae.options.__file="src/main/Vue/components/mainTabs/adminTab/users.vue";const se={name:"adminSettings",components:{dbSettings:ee,users:ae.exports},data(){return{language:this.$root.$data.language,currentTab:""}}};a(102);var ne=s(se,Y,[],!1,null,"dbd99e66",null);ne.options.__file="src/main/Vue/components/mainTabs/adminSettings.vue";const ie={name:"mainBlock",components:{languageSelector:i,userMenu:d,mainTab:z,userSettings:X,adminSettings:ne.exports},data(){return{tokenProvider:this.$root.$data.tokenProvider,language:this.$root.$data.language,currentTab:"mainTab",message:""}},methods:{setTab(e){this.currentTab=e},showMsg(e){this.message=e}},created(){this.$eventHub.$on("show-msg",this.showMsg)},beforeDestroy(){this.$eventHub.$off("show-msg")}};a(374);var oe=s(ie,e,[],!1,null,"0d318d31",null);oe.options.__file="src/main/Vue/components/mainBlock.vue";const re=oe.exports;var de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null===e.tokenProvider.token?a("div",{staticClass:"l-modal"},[a("div",{staticClass:"l-modal-body"},[e.message?a("div",{staticClass:"alert alert-danger",on:{click:function(t){e.message=""}}},[e._v("\n            "+e._s(e.message)+"\n        ")]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.language.data.lf1},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:e.language.data.lf2},domProps:{value:e.password},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-md-center"},[a("button",{staticClass:"btn btn-primary",on:{click:e.doLogin}},[e._v(e._s(e.language.data.lf3))])])])])]):e._e()};de._withStripped=!0;const ce={name:"loginForm",data(){return{tokenProvider:this.$root.tokenProvider,language:this.$root.$data.language,message:"",login:"",password:""}},methods:{async doLogin(){if(this.login.length>1){this.message="";try{await this.tokenProvider.login(this.login,this.password)&&this.$eventHub.$emit("show-msg",this.language.data.lfe2)}catch(e){e.message?this.message=this.language.data[e.message]:this.message=Vue.errorParser(e)}finally{this.password=""}}}}};a(26);var le=s(ce,de,[],!1,null,"758f7bac",null);le.options.__file="src/main/Vue/components/loginForm.vue";const ue=le.exports,me={lifeTime:null,renewTime:null,token:null,userName:null,adminSettings:!1,async login(e,t){let a={login:"",password:""};a.login=e,a.password=t;const s=await Vue.cryptoProvider.encrypt(a),n=await $.ajax({url:"/user/login",method:"POST",data:s}),i=Vue.cryptoProvider.decrypt(n);if(i.message)throw new Error(i.message);return this.lifeTime=i.lifeTime,this.token=i.token,this.adminSettings=i.adminSettings,this.userName=e,this.renewTime=Date.now()+(i.lifeTime-Date.now())/2,i.systemClosed},logout(){this.token=null},async getToken(){if(null!==this.token&&Date.now()>this.renewTime&&Date.now()<this.lifeTime&&await this.renewToken(this.token),null===this.token||Date.now()>this.lifeTime)for(this.token=null;null===this.token;)await new Promise((e=>setTimeout(e,1e3)));return this.token},async renewToken(e){const t={token:e},a=await Vue.cryptoProvider.encrypt(t),s=await $.ajax({url:"/user/renewToken",method:"POST",data:{key:a.key,data:a.data}}),n=Vue.cryptoProvider.decrypt(s);this.lifeTime=n.lifeTime,this.token=n.token,this.adminSettings=n.adminSettings,this.renewTime=Date.now()+(n.lifeTime-Date.now())/2}},ve={serverKeyExpireDate:null,serverPublicKey:null,frontKeyPair:null,async encrypt(e){if(await this.checkKey(),this.serverPublicKey){e.publicKey=forge.pki.publicKeyToPem(this.frontKeyPair.publicKey);const t=forge.random.getBytesSync(32),a=forge.random.getBytesSync(16),s=forge.cipher.createCipher("AES-CBC",t);s.start({iv:a}),s.update(forge.util.createBuffer(JSON.stringify(e),"utf8")),s.finish();const n={key:forge.util.encode64(t),iv:forge.util.encode64(a)},i=forge.pki.publicKeyFromPem(this.serverPublicKey).encrypt(JSON.stringify(n));return{key:forge.util.encode64(i),data:forge.util.encode64(s.output.data)}}},decrypt(e){const t=forge.util.decode64(e.key),a=JSON.parse(this.frontKeyPair.privateKey.decrypt(t)),s=forge.util.decode64(a.key),n=forge.util.decode64(a.iv),i=forge.cipher.createDecipher("AES-CBC",s);return i.start({iv:n}),i.update(forge.util.createBuffer(forge.util.decode64(e.data))),i.finish(),JSON.parse(forge.util.decodeUtf8(i.output.data))},async checkKey(){(null===this.serverPublicKey||null===this.serverKeyExpireDate||this.serverKeyExpireDate<Date.now())&&await this.getPublicKey()},async getPublicKey(){const e=this;try{const t=await $.ajax({url:"/crypto/getKey"});e.serverPublicKey=t.keyPEM,e.serverKeyExpireDate=t.keyPairExpireDate}catch(e){console.log("Error getting public key "+e.responseJSON.status+" "+e.responseJSON.error+" "+e.responseJSON.message)}},init(){forge.pki.rsa.generateKeyPair({bits:2048,e:65537,workers:2},((e,t)=>{this.frontKeyPair=t}))}};Vue.use({install(e){e.cryptoProvider=ve}}),Vue.use({install(e){e.errorParser=function(e){return e.responseJSON?"Error "+e.responseJSON.status+" "+e.responseJSON.error+" "+e.responseJSON.message:"Error "+e.status}}}),Vue.prototype.$eventHub=new Vue,Vue.cryptoProvider.init(),new Vue({el:"#app",components:{"main-block":re,"login-form":ue},data:{tokenProvider:me,language:{name:"",data:{}},langLoadStatus:!1},methods:{getPreferredLang(){const e=(document.cookie.match("lang=(.+?)(;|$)")||[])[1]||"";return""===e?navigator.language:e},loadLanguage(e){const t=this;$.getJSON("/language/"+e+".json",(e=>{t.language.name=e.name,t.language.data=e.data})).fail((e=>{404===e.status&&(t.langLoadStatus?console.log("Error loading language."):(t.langLoadStatus=!0,t.loadLanguage("en-US")))}))}},mounted(){this.loadLanguage(this.getPreferredLang())}})})()})();